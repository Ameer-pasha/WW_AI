<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkWise AI - Employee Detail View</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="light-mode">

    <aside class="sidebar">
        <div class="logo-section">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#007BFF" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM14.5 8C15.33 8 16 8.67 16 9.5C16 10.33 15.33 11 14.5 11C13.67 11 13 10.33 13 9.5C13 8.67 13.67 8 14.5 8ZM9.5 8C10.33 8 11 8.67 11 9.5C11 10.33 10.33 11 9.5 11C8.67 11 8 10.33 8 9.5C8 8.67 8.67 8 9.5 8ZM12 19.2C9.5 19.2 7.4 17.67 6.6 15.4H17.4C16.6 17.67 14.5 19.2 12 19.2Z"/>
            </svg>
            <h1>WorkWise AI</h1>
            <p>Manager Portal</p>
        </div>

        <nav class="nav-links">
            <a href="{{ url_for('team_dashboard') }}">
                <span class="material-icons">dashboard</span> Team Dashboard
            </a>
            <a href="{{ url_for('your_dashboard') }}">
                <span class="material-icons">person</span> Your Dashboard
            </a>
            <a href="{{ url_for('leaderboard') }}">
                <span class="material-icons">leaderboard</span> Leaderboard
            </a>
            <a href="{{ url_for('ai_insights') }}">
                <span class="material-icons">auto_fix_high</span> AI Insights
            </a>
        </nav>

        <div class="utility-section">
            <button id="mode-toggle" onclick="toggleDarkMode()">
                <span class="material-icons">dark_mode</span> Dark Mode
            </button>
            <a href="{{ url_for('logout') }}" class="logout">
                <span class="material-icons">logout</span> Logout
            </a>
        </div>
    </aside>

    <main class="main-content">

        <div class="profile-header">
            <a href="{{ url_for('team_dashboard') }}" class="back-link">
                <span class="material-icons icon-sm">arrow_back</span> Back to Dashboard
            </a>
            <div class="profile-avatar">{{ employee.name|first }}{{ employee.name.split()[1]|first if employee.name.split()|length > 1 else '' }}</div>
            <div class="profile-info">
                <h3>{{ employee.name }}</h3>
                <p>{{ employee.role }}</p>
                <div class="profile-contact-stats">
                    <span>{{ employee.email }}</span>
                    <span>Joined {{ employee.join_date.strftime('%b %Y') if employee.join_date else 'Jan 2024' }}</span>
                </div>
            </div>
            <div class="profile-actions">
                <button class="action-button feedback">
                    <span class="material-icons">chat_bubble_outline</span> Feedback
                </button>
                <button class="action-button reward">
                    <span class="material-icons">redeem</span> Reward
                </button>
            </div>
        </div>

        <div class="employee-metrics">

            <div class="metric-card">
                <div class="metric-card-title">Total Commits</div>
                <div class="metric-card-value">{{ employee.commits }}</div>
                <p class="metric-card-change green-text">+{{ employee.commits_weekly_change or 12 }} this week</p>
            </div>

            <div class="metric-card">
                <div class="metric-card-title">Tasks Completed</div>
                <div class="metric-card-value">{{ employee.tasks_completed }}</div>
                <p class="metric-card-change green-text">+{{ employee.tasks_weekly_change or 5 }} this week</p>
            </div>

            <div class="metric-card">
                <div class="metric-card-title">Total Bonus</div>
                <div class="metric-card-value green-text">₹{{ employee.bonus_amount|format_number }}</div>
                <p class="metric-card-change text-secondary">This month</p>
            </div>

            <div class="metric-card">
                <div class="metric-card-title">Work Hours</div>
                <div class="metric-card-value">{{ employee.work_hours }}</div>
                <p class="metric-card-change text-secondary">This month</p>
            </div>

        </div>

        <div class="skill-progress-section">

            <div class="content-box graph-section section-left" style="margin-bottom: 0;">
                <div class="graph-header">
                    <h3>Performance Trend</h3>
                    <p class="text-secondary">Monthly comparison</p>
                </div>
                <div class="chart-placeholder">
                    Line Graph Placeholder: Current Month (Green) vs Previous Month (Blue)
                    <div class="chart-legend">
                        <span class="current">Current Month</span> • <span class="previous">Previous Month</span>
                    </div>
                </div>
            </div>

            <div class="content-box section-right" style="margin-bottom: 0;">
                <div class="graph-header">
                    <h3>Skill Progress</h3>
                    <p class="text-secondary">Based on GitHub activity & tasks</p>
                </div>
                <ul class="skill-list">
                    {% for skill in employee.skills %}
                    <li class="skill-item">
                        <div class="skill-item-header">
                            <span>{{ skill.name }}</span>
                            <span class="blue-text">{{ skill.level }}%</span>
                        </div>
                        <div class="progress-bar-container small">
                            <div class="progress-bar" style="width: {{ skill.level }}%;"></div>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>

        </div>

        <div class="ai-summary-box">
            <h4><span class="material-icons icon-blue">auto_fix_high</span> AI-Generated Monthly Summary</h4>
            <p class="text-dark">{{ employee.ai_summary }}</p>
        </div>

        <div class="content-box">
            <h3 style="margin-top: 0;">Recent Activity</h3>

            {% for activity in employee.recent_activities %}
            <div class="activity-item">
                <div class="dot {% if loop.index == 1 %}green-dot{% else %}blue-dot{% endif %}"></div>
                <div class="text">
                    <h5>{{ activity.action }}</h5>
                    <p class="text-secondary">{{ activity.time_ago }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        
    </main>

    <script>
        const body = document.body;
        const modeToggle = document.getElementById('mode-toggle');
        
        function toggleDarkMode() {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            const iconSpan = modeToggle.querySelector('.material-icons');
            
            if (isDarkMode) {
                iconSpan.textContent = 'light_mode';
                modeToggle.lastChild.textContent = ' Light Mode';
            } else {
                iconSpan.textContent = 'dark_mode';
                modeToggle.lastChild.textContent = ' Dark Mode';
            }
        }
    </script>
</body>
</html>